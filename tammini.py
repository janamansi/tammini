# -*- coding: utf-8 -*-
"""tammini.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1fSKZuRyHBqU2Wn272j03yaKVenvZ6Xs0
"""

# app.py
import streamlit as st
import sqlite3

# Connect to the database (or create if not exist)
conn = sqlite3.connect('users.db', check_same_thread=False)
c = conn.cursor()

# Tables
c.execute('''CREATE TABLE IF NOT EXISTS users (
    username TEXT PRIMARY KEY,
    password TEXT
)''')
c.execute('''CREATE TABLE IF NOT EXISTS responses (
    username TEXT,
    gender TEXT,
    age TEXT,
    q1 TEXT,
    q2 TEXT,
    q3 TEXT,
    q4 TEXT,
    q5 TEXT,
    q6 TEXT,
    q7 TEXT,
    q8 TEXT
)''')
conn.commit()

# Signup page
def signup():
    st.subheader("ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯")
    username = st.text_input("Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")
    password = st.text_input("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±", type="password")
    if st.button("ØªØ³Ø¬ÙŠÙ„"):
        try:
            c.execute("INSERT INTO users VALUES (?, ?)", (username, password))
            conn.commit()
            st.success("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.")
        except:
            st.error("Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„.")

# Login page
def login():
    st.subheader("ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„")
    username = st.text_input("Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")
    password = st.text_input("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±", type="password")
    if st.button("Ø¯Ø®ÙˆÙ„"):
        c.execute("SELECT * FROM users WHERE username=? AND password=?", (username, password))
        result = c.fetchone()
        if result:
            st.session_state['user'] = username
            st.success("Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒØŒ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.")
        else:
            st.error("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©.")

# Questionnaire page
def questionnaire():
    st.subheader("ğŸ“ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù†ÙØ³ÙŠ")
    gender = st.radio("Ù…Ø§ Ù‡Ùˆ Ø¬Ù†Ø³ÙƒØŸ", ["Ø°ÙƒØ±", "Ø£Ù†Ø«Ù‰"])
    age = st.radio("Ù…Ø§ Ù‡ÙŠ ÙØ¦ØªÙƒ Ø§Ù„Ø¹Ù…Ø±ÙŠØ©ØŸ", ["18-29", "30-39", "40-49", "50+"])

    q1 = st.text_area("Ø³1: Ù‡Ù„ ØªØ¬Ø¯ Ù†ÙØ³Ùƒ ØªØ¹Ø§Ù†ÙŠ Ù…Ù† Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…ÙØ±Ø· Ø£Ùˆ Ø§Ù„Ù‚Ù„Ù‚ Ø§Ù„Ø²Ø§Ø¦Ø¯ØŸ")
    q2 = st.text_area("Ø³2: Ù‡Ù„ ØªÙˆØ§Ø¬Ù‡ ØµØ¹ÙˆØ¨Ø© ÙÙŠ Ø§Ù„Ø³ÙŠØ·Ø±Ø© Ø¹Ù„Ù‰ Ø£ÙÙƒØ§Ø±Ùƒ Ø§Ù„Ù‚Ù„Ù‚Ø©ØŸ")
    q3 = st.text_area("Ø³3: Ù‡Ù„ ÙŠØªØ±Ø§ÙÙ‚ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…ÙØ±Ø· Ù…Ø¹ Ø£Ø¹Ø±Ø§Ø¶ Ù…Ø«Ù„ Ø§Ù„ØªØ¹Ø¨ Ø£Ùˆ Ù‚Ù„Ø© Ø§Ù„Ù†ÙˆÙ…ØŸ")
    q4 = st.text_area("Ø³4: Ù‡Ù„ Ù…Ø±Ø±Øª Ø¨ÙØªØ±Ø© Ø§ÙƒØªØ¦Ø§Ø¨ Ù„Ø£ÙƒØ«Ø± Ù…Ù† Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ†ØŸ")
    q5 = st.text_area("Ø³5: Ù‡Ù„ Ø³Ø¨Ø¨Øª Ù„Ùƒ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ø¶ÙŠÙ‚Ù‹Ø§ Ù†ÙØ³ÙŠÙ‹Ø§ ÙƒØ¨ÙŠØ±Ù‹Ø§ØŸ")
    q6 = st.text_area("Ø³6: Ù‡Ù„ ÙƒØ§Ù†Øª Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ù†ØªÙŠØ¬Ø© Ø£Ø¯ÙˆÙŠØ© Ø£Ùˆ Ù…ÙˆØ§Ø¯ØŸ")
    q7 = st.text_area("Ø³7: (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ø£ÙŠ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©ØŸ")
    q8 = st.text_area("Ø³8: (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ù…ØªÙ‰ Ø¨Ø¯Ø£Øª Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ØŸ")

    if st.button("Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"):
        c.execute("INSERT INTO responses VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",
                  (st.session_state['user'], gender, age, q1, q2, q3, q4, q5, q6, q7, q8))
        conn.commit()
        st.success("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª. Ø³ÙŠØªÙ… ØªØ­Ù„ÙŠÙ„Ù‡Ø§ Ø§Ù„Ø¢Ù†.")
        st.image("ffd21d58-2e22-4afd-b179-3b1a07971f34.png", caption="Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…")

# Main app
st.set_page_config(page_title="Ù…Ù†ØµØ© Ø·Ù…Ù†ÙŠ", layout="centered")
st.title("ğŸŒ¿ Ù…Ù†ØµØ© Ø·Ù…Ù†ÙŠ - ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ØµØ­Ø© Ø§Ù„Ù†ÙØ³ÙŠØ©")

if 'user' not in st.session_state:
    page = st.sidebar.selectbox("Ø§Ø®ØªØ± Ø§Ù„ØµÙØ­Ø©", ["ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„", "ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯"])
    if page == "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„":
        login()
    else:
        signup()
else:
    questionnaire()